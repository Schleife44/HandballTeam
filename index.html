<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team-Tracker</title>
    <!-- Die Version ?v=1.6 hilft, Cache-Probleme zu vermeiden. -->
    <link rel="stylesheet" href="styles.css?v=1.6">
</head>
<body>

    <!-- ######################################## -->
    <!-- BILDSCHIRM 1: TEAM-ERSTELLUNG (ROSTER) -->
    <!-- ######################################## -->
    <div id="rosterBereich">
        <h1>Team-Erstellung</h1>
        <p>Füge deine Spieler hinzu. Das Team wird auf diesem Gerät gespeichert.</p>
        
        <!-- Formular zum Hinzufügen/Bearbeiten -->
        <form id="addPlayerForm">
            <input type="hidden" id="editPlayerIndex"> <!-- Verstecktes Feld für Bearbeitung -->
            <input type="text" id="playerNameInput" placeholder="Name" required>
            <input type="number" id="playerNumberInput" placeholder="Nr." required>
            <button type="submit">Hinzufügen</button>
            <button type="button" id="cancelEditButton" class="versteckt">Abbrechen</button>
        </form>

        <!-- Team Import/Export -->
        <div id="teamVerwaltung">
            <button id="exportTeamButton" class="team-manage-btn">Team exportieren (.json)</button>
            <button id="importTeamButton" class="team-manage-btn">Team importieren (.json)</button>
            <input type="file" id="importFileInput" class="versteckt" accept=".json">
        </div>

        <h3>Aktuelles Team</h3>
        <ul id="rosterListe">
            <!-- Spieler werden hier von JS eingefügt -->
        </ul>
        
        <button id="startGameButton" class="cta-button">Spiel starten</button>
    </div>

    <!-- ######################################## -->
    <!-- BILDSCHIRM 2: SPIEL-MODUS -->
    <!-- ######################################## -->
    <div id="spielBereich" class="versteckt">

        <!-- NEUE Seitenleiste für Tor-Statistik -->
        <aside id="torTracker" class="versteckt">
            <h3>Tor-Tracker</h3>
            <table id="torTabelle">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Tore</th>
                    </tr>
                </thead>
                <tbody id="torTabelleBody">
                    <!-- Wird von JS gefüllt -->
                </tbody>
            </table>
        </aside>
        
        <!-- Wrapper für den Hauptinhalt -->
        <div id="mainGameContent">
            <!-- 1. Verwaltung (Zurück, Export, Neues Spiel) -->
            <div id="verwaltung">
                <button id="backToRosterButton">Team ändern</button>
                <button id="exportButton">Export .txt</button>
                <button id="neuesSpielButton">Neues Spiel</button>
            </div>

            <!-- 2. Timer-Steuerung -->
            <div id="timerContainer">
                <div id="timerAnzeige">00:00</div>

                <!-- Spielstand-Anzeige mit Korrektur -->
                <div id="scoreWrapper" class="versteckt">
                    <div class="score-team-control">
                        <button id="heimScoreUp" class="score-korrektur" disabled>Heim +</button>
                        <button id="heimScoreDown" class="score-korrektur" disabled>Heim -</button>
                    </div>
                    <div id="scoreAnzeige">0:0</div>
                    <div class="score-team-control">
                        <button id="gegnerScoreUp" class="score-korrektur" disabled>Gegner +</button>
                        <button id="gegnerScoreDown" class="score-korrektur" disabled>Gegner -</button>
                    </div>
                </div>
                
                <div id="zeitSprung">
                    <button id="zurueckButton" class="zeitButton">-30s</button>
                    <!-- Der NEUE, separate Pause-Knopf -->
                    <button id="pauseButton" class="zeitButton versteckt" disabled>Pause</button> 
                    <button id="vorButton" class="zeitButton">+30s</button>
                </div>
                <!-- Der ALTE Pause-Knopf, jetzt für die Spielphasen -->
                <button id="gamePhaseButton">Spielstart</button>
            </div>

            <!-- 3. Globale Aktionen -->
            <div id="globalAktionen" class="versteckt">
                <button id="gegnerTorButton" disabled>Gegner Tor</button>
                <button id="gegner2minButton" disabled>Gegner 2 min</button>
            </div>

            <!-- 4. Spieler-Raster -->
            <h3>Spieler auswählen:</h3>
            <div id="spielerRaster">
                <!-- Spieler-Knöpfe werden hier von JS eingefügt -->
            </div>

            <!-- 5. Protokoll -->
            <div id="protokoll">
                <h3>Protokoll</h3>
                <div id="protokollAusgabe"></div>
            </div>
        </div> <!-- Ende #mainGameContent -->
    </div> <!-- Ende #spielBereich -->


    <!-- ######################################## -->
    <!-- MODALS (Pop-ups) -->
    <!-- ######################################## -->

    <!-- Modal 1: Haupt-Aktionsmenü -->
    <div id="aktionsMenue" class="modal-overlay versteckt">
        <div class="modal-content">
            <h3 id="aktionsMenueTitel">Aktion für...</h3>
            <button class="aktion-button" data-aktion="Tor">Tor</button>
            <button class="aktion-button" data-aktion="Fehlwurf">Fehlwurf</button>
            <button class="aktion-button" data-aktion="7M Rausgeholt">7M Rausgeholt</button>
            <button class="aktion-button" id="guteAktionModalButton">Gute Aktion</button>
            <button class="aktion-button" data-aktion="Fehlpass">Fehlpass</button>
            <button class="aktion-button" data-aktion="Technischer Fehler">Technischer Fehler</button>
            <!-- Strafen -->
            <button class="aktion-button strafe-gelb" data-aktion="Gelbe Karte">Gelbe Karte</button>
            <button class="aktion-button strafe-zeit" data-aktion="2 Minuten">2 Minuten</button>
            <button class="aktion-button strafe-rot" data-aktion="Rote Karte">Rote Karte</button>
            
            <button class="modal-abbrechen" id="aktionAbbrechen">Abbrechen</button>
        </div>
    </div>
    
    <!-- Modal 2: "Gute Aktion" Vorauswahl -->
    <div id="aktionVorauswahl" class="modal-overlay versteckt">
        <div class="modal-content">
            <h3>Gute Aktion:</h3>
            <button class="aktion-button" data-aktion="Abwehr">Abwehr</button>
            <button class="aktion-button" data-aktion="TG Pass">TG Pass</button>
            <button class="aktion-button" data-aktion="Guter Pass">Guter Pass</button>
            <button class="aktion-button" data-aktion="Anderes">Anderes</button>
            <button class="modal-abbrechen" id="aktionVorauswahlAbbrechen">Zurück</button>
        </div>
    </div>

    <!-- Modal 3: Kommentarfeld -->
    <div id="kommentarBereich" class="modal-overlay versteckt">
        <div class="modal-content">
            <h3 id="kommentarTitel">Kommentar (optional)</h3>
            <input type="text" id="kommentarInput" placeholder="Beschreibe die Aktion...">
            <button id="kommentarSpeichernButton">Speichern</button>
        </div>
    </div>


    <script src="script.js?v=1.6"></script>
</body>
</html>
